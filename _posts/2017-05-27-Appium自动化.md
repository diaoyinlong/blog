---
title: Appium自动化
layout: post
categories: 环境部署
tags: 自动化
---
## 环境配置
1. 安装[JDK](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)
2. 安装[Android SDK](https://android-sdk.en.softonic.com/)
3. 安装[Appium](http://appium.io/downloads.html)
4. 配置JAVA_HOME和ANDROID_HOME环境变量
5. cmd进入sdk\builds-tools\后执行一下命令获取package和activity

		aapt dump badging E:\apk\es3.apk

6. 使用sdk\tools\uiautomatorview工具获取设备名称和控件信息

>目前selenim3.3.1以上版本无法输入中文，需要进行降级处理

## 安装模拟器
- 打开**SDK Manager** 推荐安装**Android 5.0.1**下的**Google APIs Intel x86 Atom System Image**镜像。
- 打开**AVD Manager**推荐Device:**Nexus 5**,Target:**Android 5.0.1 - API Level 21**，其他选项随意。
- 启动虚拟设备，隐藏虚拟键盘：**settings>Language&input>Current KeyBoard>Show input method>turn off**
![](https://uniim1.shutterfly.com/ng/services/mediarender/THISLIFE/021023659507/media/83151086800/small/1501843122/enhance) 

## 客户端参数
		desired_caps = {}
		desired_caps['platformName'] = 'Android'
		desired_caps['platformVersion'] = '5.0.2'
		desired_caps['deviceName'] = 'che_tl00h-69PBY15919006159'
		desired_caps['appPackage'] = 'com.ehomepay.app.yl'
		desired_caps['appActivity'] = 'com.lft.middleman.module.presenter.SplashActivity'
		desired_caps['unicodeKeyboard'] = True
		desired_caps['resetKeyboard'] = True
		desired_caps['noReset'] = True

		APP = webdriver.Remote('http://127.0.0.1:4723/wd/hub', desired_caps)
		APP.implicitly_wait(10)

> 小米手机在正确安装驱动后，执行命令adb devices，依然提示没有连接，这时候我们就要在拨号键盘上输入“\*#\*#717717#\*#\*”，看到提示“diag USB port enable”即可在电脑上连接到手机了