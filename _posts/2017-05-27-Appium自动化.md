---
title: Appium自动化
layout: post
categories: 自动化
tags: APP
---
1. 安装[JDK](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)
2. 安装[Android SDK](https://android-sdk.en.softonic.com/)
3. 安装[Appium](http://appium.io/downloads.html)
4. 启动Appium后指定Android SDK路径![Image Title](https://im1.shutterfly.com/ng/services/mediarender/THISLIFE/021023659507/media/82907108579/x-small/1495864031/enhance)
5. cmd进入sdk\builds-tools\后执行`aapt dump badging E:\apk\es3.apk`获取package和activity
6. 使用sdk\tools\uiautomatorview工具获取设备名称和控件信息
7. 示例代码：

    import time
    from appium import webdriver
    desired_caps = {}
    desired_caps['platformName'] = 'Android'
    desired_caps['platformVersion'] = '4.2'
    desired_caps['deviceName'] = 'che_tl00h-69PBY15919006159'
    desired_caps['appPackage'] = 'com.android.lft'
    desired_caps['appActivity'] = 'com.android.lft.block.main.StartActivity'
    driver = webdriver.Remote('http://127.0.0.1:4723/wd/hub', desired_caps)
    driver.implicitly_wait(10)
    try:
        login_btn = driver.find_element_by_id('com.android.lft:id/txt_login_btn')
        login_btn.click()
        user_name_txt = driver.find_element_by_id('com.android.lft:id/edt_mine_login_account')
        passwd_txt = driver.find_element_by_id('com.android.lft:id/edt_login_psw')
        user_name_txt.clear()
        user_name_txt.send_keys('18510290001')
        passwd_txt.send_keys('1111111q')
        submit_btn = driver.find_element_by_id('com.android.lft:id/btn_main_mine_login_login')
        submit_btn.click()
        time.sleep(2)
    finally:
        driver.quit()
        
## 安装模拟器
- 打开**SDK Manager** 推荐安装**Android 5.0.1**下的**Google APIs Intel x86 Atom System Image**镜像，7以及7以上的appium无法识别控件。
- 打开**AVD Manager**推荐Device:**Nexus 5**,Target:**Android 5.0.1 - API Level 21**，其他选项随意。
- 启动虚拟设备，隐藏虚拟键盘：**settings>Language&input>Current KeyBoard>Show input method>turn off**
![](https://uniim1.shutterfly.com/ng/services/mediarender/THISLIFE/021023659507/media/83151086800/small/1501843122/enhance) 
